---
title: "Take-home Exercise 1"
subtitle: "Creating data visualisation beyond default"
author: "Thet Myat Noe"
date: "April 16, 2024"
date-modified: "last-modified"
execute:
  eval: true
  echo: true
  warning: false
  freeze: true
---

# Overview

## Setting the scene

There are two major residential property market in Singapore, namely public and private housing. Public housing aims to meet the basic need of the general public with monthly household income less than or equal to S\$14,000. For families with monthly household income more than S\$14,000, they need to turn to the private residential market.

## Task

Analyse realis property data to reveal the private residential market and sub-markets of Singapore for the 1st quarter of 2024.

# Getting Started

## Installing and loading the required libraries

```{r}
pacman::p_load(tidyverse,dplyr,lubridate)
```

## Importing Data

```{r}
realis1 <- read_csv("data/ResidentialTransaction20240308160536.csv")
realis2 <- read_csv("data/ResidentialTransaction20240308160736.csv")
realis3 <- read_csv("data/ResidentialTransaction20240308161009.csv")
realis4 <- read_csv("data/ResidentialTransaction20240308161109.csv")
realis5 <- read_csv("data/ResidentialTransaction20240414220633.csv")

```

## Data Pre-processing

### Combining all quarter data into one file

All reseidential property market datat from realis by different quarters are merged into one file.

```{r}
realis_merge <- rbind(realis1, realis2, realis3, realis4, realis5)
```

### Checking for duplicates

```{r}
realis_merge[duplicated(realis_merge),]
```

No duplicated rows are present in the data based on duplicate check above.

### Rename columns for further data visualization
Below glimpse of data set shows the current column name. We can see there are spaces in column name.
```{r }
glimpse(realis_merge)
```

Space in column names will create error when use as it is in R code. Hence, replacing them with underscore is necessary.
Use gsub() to replace space with underscores and use rename_with() function from 'dplyr' to rename all the columns with new column names.
```{r }
realis_merge <- realis_merge %>%
  rename_with(~ gsub(" ", "_", .), everything())
```

Now, we can see that column names are renamed accordingly with underscore in place of space.
```{r }
glimpse(realis_merge)
```

### Create Quarter Column
Use as.Date() function to put Sale_Date column into date object, specify format to ensure as.Date() recognize the content accurately as date.
Use year() and quarter() functions from 'lubridate' package to extract year and use paste() to concatenate the strings.

::: panel-tabset
## Code

```{r}
realis_merge$Sale_Date <- as.Date(realis_merge$Sale_Date, format = "%d %b %Y")
realis_merge$Quarter <- paste(year(realis_merge$Sale_Date), "Q", quarter(realis_merge$Sale_Date), sep="")
```

## Data Glimpse

```{r}
glimpse(realis_merge)
```

:::
# Data Visualization 1

```{r}
# Get number of transactions for each combination of Planning_Region and Quarter
trans_per_region_quarter <- realis_merge %>%
  group_by(Planning_Region, Quarter) %>%
  summarise(Number_of_Transactions = n(), .groups = 'drop')

# Plot the bar chart with a breakdown by quarter
ggplot(trans_per_region_quarter, aes(x = Planning_Region, y = Number_of_Transactions, fill = Quarter)) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(x = "Planning Region", y = "Number of Transactions", title = "Number of Transactions by Planning Region and Quarter") 

```